{{- with resources.Get "styles/sidebar.css" }}
  <style>{{ .Content | safeCSS }}</style>
{{- end }}

{{- with .Parent }}
  <div class="sidebar">
    <ul>
      {{- range .Pages.ByTitle }}
        <li>
          <a href="{{ .RelPermalink }}" class="flexy-button"
            >{{ .LinkTitle }}</a
          >
        </li>
      {{- end }}
    </ul>
  </div>
{{- end }}


<script>
  void (function () {
    const anchor = document.querySelector(
      `.sidebar a.flexy-button[href="${location.pathname}"]`,
    );
    if (anchor) anchor.classList.add('flexy-button--tonal-primary');

    // inside top navbar
    const menuBtn = document.getElementById('menu-button');
    const sidebar = document.querySelector('.sidebar');

    if (menuBtn) {
      document.addEventListener('click', (event) => {
        if (event.target == menuBtn || event.target.closest('[menu-button]')) {
          sidebar.classList.toggle('sidebar--open');
        } else if (!event.target.closest('.sidebar')) {
          sidebar.classList.remove('sidebar--open');
        }
      });
    }
  })();
</script>
