{{- with resources.Get "styles/sidebar.css" }}
  <style>{{ .Content | safeCSS }}</style>
{{- end }}

{{- with .Parent }}
  <div class="sidebar">
    <ul>
      {{- range .Pages.ByTitle }}
        <li>
          <a href="{{ .RelPermalink }}" class="flexy-button flexy-button--lg"
            >{{ .LinkTitle }}</a
          >
        </li>
      {{- end }}
    </ul>
  </div>
{{- end }}


<script>
  void (function () {
    const anchor = document.querySelector(
      `.sidebar a.flexy-button[href="${location.pathname}"]`,
    );
    if (anchor) anchor.classList.add('flexy-button--tonal-primary');

    // inside top navbar
    const sidebar = document.querySelector('.sidebar');

    document.addEventListener('click', (event) => {
      if (!(event.target instanceof Element)) return;

      if (event.target.closest('#menu-button')) {
        sidebar.classList.toggle('sidebar--open');
      } else if (!event.target.closest('.sidebar')) {
        sidebar.classList.remove('sidebar--open');
      }
    });
  })();
</script>
