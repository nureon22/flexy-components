{{- with resources.Get "styles/global.css" }}
  <style>{{ .Content | safeCSS }}</style>
{{- end }}

{{- with resources.Get "iife/main.css" }}
  {{- if hugo.IsProduction }}
    {{- with . | fingerprint }}
      <link
        href="{{ .RelPermalink }}"
        rel="stylesheet"
        integrity="{{ .Data.Integrity }}"
      />
    {{- end }}
  {{- else }}
    <link rel="stylesheet" href="{{ .RelPermalink }}" />

    {{- with resources.Get "iife/main.css.map" }}
      <!--{{ .RelPermalink }}-->
    {{- end }}
  {{- end }}
{{- end }}

{{- $userAgent := "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36" }}
{{- $fontUrl := "https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" }}
{{- with resources.GetRemote $fontUrl (dict "Headers" (dict "User-Agent" $userAgent)) }}
  <style>{{ .Content | safeCSS }}</style>
{{- end }}

{{- range (slice "syntax/github-light.css" "syntax/github-dark.css" ) }}
  {{- with resources.Get . }}
    {{- if hugo.IsProduction }}
      {{- with . | fingerprint }}
        <link
          rel="stylesheet"
          data-href="{{ .RelPermalink }}"
          integrity="{{ .Data.Integrity }}"
        />
      {{- end }}
    {{- else }}
      <link rel="stylesheet" data-href="{{ .RelPermalink }}" />
    {{- end }}
  {{- end }}
{{- end }}


<script defer>
  void (function () {
    window.addEventListener('load', () => {
      document.querySelectorAll('link[data-href]').forEach((link) => {
        link.setAttribute('href', link.getAttribute('data-href'));
      });
    });
  })();
</script>
