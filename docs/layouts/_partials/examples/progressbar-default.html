<div class="flex-row" style="margin-bottom: 24px;">
  <button class="flexy-button flexy-button--filled-primary" id="progress-start">
    <span id="progress-start-content">Start</span>
  </button>
</div>

<div
  class="flexy-progressbar"
  role="progressbar"
  aria-valuenow="0"
  id="progressbar-1"
>
  <div class="flexy-progressbar__inactive-track"></div>
  <div class="flexy-progressbar__active-track"></div>
</div>

<script type="module">
  const button = document.querySelector('#progress-start');
  const content = document.querySelector('#progress-start-content');
  const progressbar = document.querySelector('#progressbar-1');

  let interval = null;
  let count = 0;

  const complete = () => {
    content.textContent = 'Restart';
    count = 0;
    interval = clearInterval(interval);
  };

  const stop = () => {
    content.textContent = 'Start';
    interval = clearInterval(interval);
  };

  const start = () => {
    content.textContent = 'Stop';
    clearInterval(interval);

    interval = setInterval(() => {
      if (++count > 100) complete();
      else progressbar.ariaValueNow = count;
    }, 100);
  };

  button.addEventListener('click', () => {
    interval ? stop() : start();
  });
</script>
