{{- with resources.Get "styles/navbar.css" }}
  <style>{{ .Content | safeCSS }}</style>
{{- end }}

<div class="navbar">
  <div>
    <button class="flexy-button flexy-button--icon" id="menu-button">
      <span class="material-symbol">
        {{- partial "material-symbol.html" "menu/rounded/400" }}
      </span>
    </button>
    <a class="flexy-button flexy-button--icon" href="{{ relURL "" }}">
      <span class="material-symbol">
        {{- partial "material-symbol.html" "home/rounded/400" }}
      </span>
    </a>
  </div>
  <div style="gap: 12px;">
    <a
      href="{{ .Site.Params.repository }}"
      class="flexy-button flexy-button--icon"
    >
      <span class="simple-icon icon-24">
        {{- partial "simple-icon.html" "github" }}
      </span>
    </a>
    <div class="flexy-switch">
      <input id="theme-toggle" type="checkbox" class="flexy-switch__input" />
      <div class="flexy-switch__track"></div>
      <div class="flexy-switch__thumb">
        <span class="flexy-switch__unselected-icon material-symbol">
          {{- partial "material-symbol.html" "dark_mode/rounded/700" }}
        </span>
        <span class="flexy-switch__selected-icon material-symbol">
          {{- partial "material-symbol.html" "light_mode/rounded/700" }}
        </span>
      </div>
    </div>
  </div>
</div>

<script>
  void (function () {
    const isDark = sessionStorage.getItem('theme') == 'dark';
    const themeToggle = document.getElementById('theme-toggle');
    themeToggle.checked = isDark;
    themeToggle.ariaLabel =
      'switch to ' + (isDark ? 'light' : 'dark') + ' mode';

    themeToggle.addEventListener('change', function () {
      const isDark = this.checked;
      document.documentElement.classList.toggle('dark', isDark);
      document.documentElement.classList.toggle('light', !isDark);
      sessionStorage.setItem('theme', isDark ? 'dark' : 'light');
      themeToggle.ariaLabel =
        'switch to ' + (isDark ? 'light' : 'dark') + ' mode';
    });
  })();
</script>
